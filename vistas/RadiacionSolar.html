<head>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../estilos/estilos.css">
    <link rel="stylesheet" href="../estilos/estilos.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../estilos/estilos.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//code.tidio.co/suxuoauwx2m2lx03augdp9yq83f7h2ba.js" async></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<style>
    /* Fondo general */
    body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(to bottom right, #d7d0f5, #b6aaf0);
        color: #2d2d2d;
        margin: 0;
        padding: 0;
    }

    /* Títulos */
    h1 {
        color: #4B0082;
        text-align: center;
        font-weight: bold;
        margin-top: 10px;
    }

    h3 {
        text-align: center;
        color: #5b3ca5;
        margin-top: 30px;
        font-size: 20px;
        border-bottom: 2px solid #c6b5f5;
        padding-bottom: 5px;
    }


    /* Inputs y select */
    input[type="date"],
    select {
        padding: 8px 12px;
        border: 2px solid #6b4caf;
        border-radius: 6px;
        font-size: 14px;
        background-color: #f5f3ff;
        width: 100%;
    }

    input[type="date"]:focus,
    select:focus {
        outline: none;
        border-color: #4B0082;
        background-color: #ece6ff;
    }

    /* Enlace Información de la Ciudad */
    a {
        color: #4B0082;
        font-weight: bold;
        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
        color: #6a0dad;
    }

    /* Tabla */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 14px;
    }

    table th,
    table td {
        padding: 10px;
        text-align: center;
    }

    table thead {
        background-color: #6b4caf;
        color: white;
    }

    table tr:nth-child(even) {
        background-color: #f3f0ff;
    }

    /* Colores para datos */
    td.negativo {
        background-color: #e0c3fc;
        /* Lavanda suave */
        color: #714590;
        font-weight: bold;
    }

    td.positivo {
        background-color: #c7f9cc;
        /* Verde suave */
        color: #638337;
        font-weight: bold;
    }

    /* Gráfico */
    #chart-container {
        margin-top: 30px;
        padding: 15px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Footer */
    footer.pie-pagina {
        text-align: center;
        padding: 15px;
        background-color: #4B0082;
        color: white;
        margin-top: 30px;
    }

    footer.pie-pagina a {
        margin: 0 10px;
        color: white;
        font-size: 16px;
    }

    /* Sobrescribir el rojo de Bootstrap */
    td.negativo {
        background-color: #e0c3fc !important;
        /* Lavanda */
        color: #4B0082 !important;
        font-weight: bold;
    }

    td.positivo {
        background-color: #c7f9cc !important;
        /* Verde suave */
        color: #276749 !important;
        font-weight: bold;
    }

    .city-info-tree {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 40px;
    }

    .node {
        background: #fff;
        border: 2px solid #6a1b9a;
        border-radius: 8px;
        padding: 8px 16px;
        font-weight: bold;
        text-align: center;
        min-width: 180px;
    }

    .main-node {
        background: #d1c4e9;
    }



    .line {
        width: 2px;
        height: 30px;
        background: #6a1b9a;
        margin-bottom: 5px;
    }
</style>

<div class="cuadro">

    <h1 class="mb-4">DATOS RADIACIÓN SOLAR</h1>
    <br>
    <div class="uso-tarjeta">

        <div class="row align-items-end">
            <div class="col-md-4">

                <!-- Selección de ciudad -->
                <div class="form-group seleccion-ciudad">
                    <label class="form-label">
                        <i class="bi bi-lightbulb me-2" style="color: #4B0082;"></i> SELECCIONE LA CIUDAD
                    </label>
                    <select class="form-select" ng-model="ciudadSeleccionada" ng-options="c.ciudad for c in ciudades"
                        ng-change="consultarRadiacion(ciudadSeleccionada)">
                    </select>
                </div>

                <!-- Fecha desde -->
                <div class="form-group fecha-desde mt-3">
                    <label class="form-label">
                        <i class="bi bi-calendar-event me-2" style="color: #4B0082;"></i> DESDE
                    </label>
                    <input type="date" class="form-control" ng-model="desde">
                </div>

                <!-- Fecha hasta -->
                <div class="form-group fecha-hasta mt-3">
                    <label class="form-label">
                        <i class="bi bi-calendar-check me-2" style="color: #4B0082;"></i> HASTA
                    </label>
                    <input type="date" class="form-control" ng-model="hasta">
                </div>

            </div>
        </div>



        <div class="col-md-6 mb-3">
            <canvas id="grafico" style="width:100%;height:300px;margin: 0 auto"></canvas>
        </div>

        <div class="city-info-tree" style="margin: auto;">

            <div ng-if="ciudadSeleccionada">
                <h3 style="text-align: center;">
                    <i class="bi bi-lightbulb me-2" style="color: #4B0082;">Información de la Ciudad</i>
                </h3>

                <div class="node main-node"><strong>Nombre:</strong> {{ ciudadSeleccionada.ciudad }}</div>
                <div class="branches">
                    <div>

                        <div class="node"><strong>Latitud:</strong> {{ ciudadSeleccionada.lat }}</div>
                    </div>
                    <div>

                        <div class="node"> <strong>Longitud:</strong> {{ ciudadSeleccionada.lon }}</div>
                    </div>
                </div>

            </div>


        </div>
    </div>


    <div class="row">
        <div >
            <div class="table-responsive">
                <table class="table table-striped table-hover table-sm">
                    <thead class="table-light">
                        <tr>
                            <th>Fecha</th>
                            <th>kWh/m²</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="(fecha, valor) in radiacion">
                            <td>{{ fecha }}</td>
                            <td>{{ valor }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>



    </div>

    <footer class="pie-pagina">
        <div class="contacto-footer">

            <a href="https://www.instagram.com/valtika_energy" target="_blank"
                style="text-decoration: none; color: inherit; font-size: 18px;">
                <i class="fab fa-instagram" style="color: #E1306C; margin-right: 5px;"></i> @valtika_energy
            </a>
            <a href="mailto:valtikaenergy@gmail.com" style="text-decoration: none; color: inherit; font-size: 18px;">
                <i class="fas fa-envelope" style="color: #D44638; margin-right: 5px;"></i> valtikaenergy@gmail.com
            </a>

        </div>
    </footer>
</div>